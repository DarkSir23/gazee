<%!
	import gazee
%>
<!doctype html>
<div class="whole-page">
<html>
<head>
	<title>Gazee</title>
	<meta name="description" content="Gazee Base Mako Page - Made by Hubcaps / Jessi">
	<meta name="author" content="Hubcaps / Jessi">
	
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	
  <link href="http://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.6/css/materialize.min.css">
  <link rel="stylesheet" type="text/css" href="static/css/style.css">
</head>

<body>

  <div class="dropdown-content" id="nav-dropdown">
    <ul id="nav-items">
      <li id="dash_dashboard"><a class="waves-effect orange lighten-2 white-text" href="/index"><b>Dashboard</b></a></li>
      <li id="dash_library"><a class="waves-effect blue-grey white-text" href="/library?directory=${gazee.COMIC_PATH}"><b>Library</b></a></li>
      <li id="dash_settings"><a class="waves-effect orange lighten-2 white-text" href="#!"><b>Settings</b></a></li>
    </ul>
  </div>

  <header>
    <ul class="dropdown-content" id="user-dropdown">
      <li><a class="logout-item" href="#!">Logout</a></li>
    </ul>
    <nav class="" role="navigation">
      <div class="nav-wrapper" id="logo-wrapper">
        <a data-activates="slide-out" class="button-collapse show-on-large" href="#!"><img style="margin-top: -2px; margin-left: -9px;" width="250" height="70" src="static/images/logo.png" /></a>
        <ul class="right">
          <li>
            <a class="right dropdown-button" href='' data-activates='user-dropdown'><i class='material-icons'>account_circle</i></a>
          </li>
        </ul>
      </div>
    </nav>
    <nav>
      <div class="nav-wrapper" id="breadcrumbs">
        <a class="waves-effect dropdown-button btn-large" id="nav-drop-button" data-activates='nav-dropdown' href="#!">Library</a>
        <a style="margin-left: 20px;" class="breadcrumb" href="/library?directory=${gazee.COMIC_PATH}">Comics</a>
%if parent_dir != '':
        <a style="margin-left: 20px;" class="breadcrumb" href="/library?directory=${parent_dir}">${parent_dir}</a>
%endif
      </div>
    </nav>
  </header>

  <main id="whiteboard">
    <div class="row">
      <div>
        <div class="row">
            <div id="library">
              <div class="row center-cols center-align">
% for directory in directories:
                <div class="col s4 m4 l3">
                  <div class="card">
                    <div class="card-content hoverable">
                      <span class="card-title" style="width:100%;"><a href="/library?directory=${directory}" id="library-link">${directory}</span></a>
                    </div>
                  </div>
                </div>
% endfor
% for comic in comics:
                <div class="col s4 m4 l3">
                  <div class="card">
                    <div class="card-image hoverable">
                      <a href="/readComic?comic_path=${comic['ComicPath']}" id="read-link"><img id="comic-image" src="${comic['ComicImage']}"></a>
                    </div>
                    <div class="card-content small hoverable">
                      <span class="card-title activator" style="width:100%;">${comic['ComicName']} ${comic['ComicIssue']}</span>
                    </div>
                    <div class="card-reveal">
                      <span class="card-title">${comic['ComicName']} ${comic['ComicIssue']}</span>
                      <p class="flow-text" style="font-size: 0.9em"><a href="/readComic?comic_path=${comic['ComicPath']}" id="read-link">${comic['ComicSummary']}</a><i class="material-icons right">close</i></p>
                    </div>
                  </div>
                </div>
% endfor
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <footer class="page-footer" id="footer">
    <div class="container">
      <div class="row">
        <div class="col s12">
        </div>
      </div>
    </div>
  </footer>
	
  <script type="text/javascript" src="https://code.jquery.com/jquery-2.2.4.min.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.6/js/materialize.min.js"></script>

  <!--
  This function simply loads the recent method from mylar.py to generate the comics from the last week.
  -->
  <script type="text/javascript">
      $(document).ready(function() {
// This displays the settings when clicked.
        $("#dash_settings").click(function() {
          $("#whiteboard").html('\
            <div class="row">\
              <div>\
                <div class="row">\
                  <ul id="settings-header"><b><h4>Settings</h4></b></ul>\
                    <div id="settings"></div>\
                </div>\
              </div>\
            </div>'
          );
          $("#dash_dashboard").html('<a class="waves-effect orange lighten-2 white-text" href="#!"><b>Dashboard</b></a>');
          $("#dash_library").html('<a class="waves-effect orange lighten-2 white-text" href="#!"><b>Library</b></a>');
          $("#dash_settings").html('<a class="waves-effect blue-grey white-text" href="#!"><b>Settings</b></a>');
          $("#settings").load("/settings", function() {
          });
        });
      });
  </script>
	
</body>
</html>
</div>
